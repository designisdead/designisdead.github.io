<template>
  <div v-editable="Blok">
    <div class="Wrapper" :class="[Blok.backgroundcolor, Blok.textcolor, Height]">
      <div class="Wrapper-content" :class="[Size]">
        <component :key="Blok._uid" v-for="Blok in Blok.elements" :blok="Blok" :is="Blok.component"></component>
        <slot></slot>
      </div>
      <div class="Wrapper-background"
        v-if="Blok.backgroundimage && !Blok.backgroundvideosrc"
        v-lazy:background-image="$options.filters.imageApi(Blok.backgroundimage, 'large')"
        :class="{
          'u-backgroundTopRight': Blok.backgroundposition == 'top right',
          'u-backgroundCenterCenter': Blok.backgroundposition == 'center center',
          'u-backgroundTopLeft': Blok.backgroundposition == 'top left',
          'u-backgroundSizeCover': Blok.backgroundsize == 'cover',
          'u-backgroundSizeContain': Blok.backgroundsize == 'contain',
          'u-backgroundAttachmentFixed' : Blok.backgroundfixed == 'fixed'
        }">
      </div>
      <particles v-if="Blok.backgroundeffect == 'particles'"></particles>
      <video-background :src="Blok.backgroundvideosrc" :poster="Blok.backgroundimage" v-if="Blok.backgroundvideosrc && Blok.backgroundimage"></video-background>
    </div>
  </div>
</template>

<script>
  export default {
    props: {
      blok: Object,
      size: String,
      height: String
    },
    computed: {
      Blok() {
        return this.blok || {};
      },
      Size() {
        return this.size || this.blok.size;
      },
      Height() {
        if(this.height) {
          return this.height;
        }
        if(this.blok && this.blok.wrapperheight) {
          return this.blok.wrapperheight;
        }
      }
    }
  }
</script>

<style lang="scss">

  .Wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    will-change: min-height;
    transition: 0.4s min-height ease-out;

    &.halfscreen {
      min-height: 50vh;
    }

    &.threequarterscreen {
      min-height: 75vh;
    }

    &.fullscreen {
      min-height: 100vh;
    }

    &.fullscreenMinusHeader {
      min-height: calc(100vh - 70px);
    }
  }

  .Wrapper-content {
    position: relative;
    margin: 0 auto;
    padding: 0 $spacer/2;
    z-index: 1;
    width: 100%;
    will-change: max-width;
    transition: 0.25s max-width ease-out;

    @each $key, $value in $sizes {
      &.#{$key} {
        max-width: $value;
      }
    }
  }

  .Wrapper-background {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background-repeat: no-repeat;
  }
</style>
